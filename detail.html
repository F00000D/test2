<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é¤å»³è©³ç´°è³‡è¨Š</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
    h1 { color: #ff5722; }
    img { width: 100%; max-width: 500px; height: 300px; object-fit: cover; border-radius: 12px; }
    .info { margin-top: 20px; }
    .info p { margin: 6px 0; font-size: 1rem; }
  </style>
</head>
<body>
  <h1 id="name">é¤å»³åç¨±</h1>
  <img id="image" src="https://via.placeholder.com/500x300" alt="é¤å»³åœ–ç‰‡" />
  <div class="info" id="details"></div>

  <script>
    const priceMap = {
      1: "NT$100~200",
      2: "NT$200~400",
      3: "NT$400~600",
      4: "NT$600ä»¥ä¸Š"
    }

    // å–å¾—ç¶²å€åƒæ•¸ id
    const params = new URLSearchParams(window.location.search)
    const id = params.get("id")

    if (!id) {
      document.getElementById("details").innerHTML = "<p>æ‰¾ä¸åˆ°é¤å»³ID</p>"
    } else {
      fetch(`http://localhost:3000/stores/${id}`)
        .then(res => res.json())
        .then(store => {
          if (!store) {
            document.getElementById("details").innerHTML = "<p>æ‰¾ä¸åˆ°é¤å»³è³‡æ–™</p>"
            return
          }

          document.getElementById("name").textContent = store.name || "ç„¡åç¨±"
          document.getElementById("image").src = store.image || "https://via.placeholder.com/500x300"
          document.getElementById("image").alt = store.name || "é¤å»³åœ–ç‰‡"

          const html = `
            ${store.address ? `<p>ğŸ“ åœ°å€: ${store.address}</p>` : ""}
            ${store.phone ? `<p>ğŸ“ é›»è©±: ${store.phone}</p>` : ""}
            ${store.rating ? `<p>â­ è©•åˆ†: ${store.rating} (${store.user_ratings_total || 0}äººè©•åˆ†)</p>` : ""}
            ${store.price_level ? `<p>ğŸ’² åƒ¹ä½: ${priceMap[store.price_level]}</p>` : ""}
            ${store.opening_now !== undefined ? `<p>ç‡Ÿæ¥­ä¸­: ${store.opening_now ? "æ˜¯" : "å¦"}</p>` : ""}
            ${store.business_status ? `<p>å•†å®¶ç‹€æ…‹: ${store.business_status}</p>` : ""}
            <p>å¤–é€: ${store.delivery ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>å…§ç”¨: ${store.dine_in ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>å¤–å¸¶: ${store.takeout ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>å¯é ç´„: ${store.reservable ? "âœ… å¯" : "âŒ ä¸å¯"}</p>
            <p>ç„¡éšœç¤™å…¥å£: ${store.wheelchair_accessible_entrance ? "âœ… æœ‰" : "âŒ ç„¡"}</p>
            <p>è³‡æ–™æŠ“å–æ™‚é–“: ${store.details_fetched_at || "ç„¡"}</p>
            ${store.google_maps_url ? `<p>ğŸŒ <a href="${store.google_maps_url}" target="_blank">Google åœ°åœ–é€£çµ</a></p>` : ""}
            ${store.website ? `<p>ğŸ”— <a href="${store.website}" target="_blank">å®˜ç¶²/è¨‚ä½é€£çµ</a></p>` : ""}
          `
          document.getElementById("details").innerHTML = html
        })
        .catch(err => {
          console.error("æŠ“è³‡æ–™å¤±æ•—", err)
          document.getElementById("details").innerHTML = "<p>æŠ“å–è³‡æ–™å¤±æ•—</p>"
        })
    }
  </script>
</body>
</html>
